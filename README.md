# 🧙‍♂️ DNSWizard

DNSWizard یک اسکریپت قدرتمند و کاربرپسند **Batch** برای ویندوز است که به شما اجازه می‌دهد با منویی ساده، سرورهای DNS خود را تغییر دهید، تنظیمات قبلی را بازیابی کنید و فایل‌های پشتیبان را مدیریت نمایید.  
این ابزار از هر دو پروتکل **IPv4** و **IPv6** پشتیبانی می‌کند و دارای امکاناتی مانند بررسی دسترسی سرورهای DNS، اطلاع‌رسانی درباره DNS over HTTPS (DoH)، و مدیریت فایل‌های پشتیبان می‌باشد.

---

## ✨ ویژگی‌ها و مزایا

- 🎯 **انتخاب آسان سرور DNS:**  
  لیست ۲۵ ارائه‌دهنده محبوب DNS (مانند Google، Cloudflare، Quad9) + گزینه‌های DHCP و بازیابی تنظیمات قبلی.

- 🌍 **پشتیبانی از IPv4 و IPv6:**  
  تنظیمات به‌صورت خودکار برای هر دو پروتکل اعمال می‌شود (در صورت فعال بودن IPv6).

- 🛡️ **بررسی دسترسی DNS:**  
  قبل از تنظیم، دسترسی سرورهای DNS با nslookup و ping بررسی می‌گردد.

- 🗂️ **پشتیبان‌گیری خودکار:**  
  قبل از هر تغییر، تنظیمات فعلی DNS ذخیره می‌شود تا بازیابی سریع و آسان باشد.

- 🧹 **مدیریت فایل‌های پشتیبان:**  
  نمایش و حذف فایل‌های پشتیبان قدیمی از طریق منوی اختصاصی.

- 🔔 **اطلاع‌رسانی درباره DoH:**  
  برای DNSهایی که از DoH پشتیبانی می‌کنند (مانند Cloudflare و Google)، پیام راهنما نمایش داده می‌شود.

- 📝 **لاگ‌گیری تغییرات:**  
  همه تغییرات در فایل `DNSChanger_log.txt` ثبت می‌شوند.

- 🖥️ **رابط کاربری ساده و زیبا:**  
  منوی متنی رنگی و پیام‌های واضح برای تجربه کاربری بهتر.

- 🔒 **نیاز به دسترسی Administrator:**  
  اجرای صحیح با بررسی مجوز ادمین تضمین می‌شود.

---

## ⚙️ پیش‌نیازها

- **سیستم‌عامل:** Windows (تست شده روی Windows 10 و 11)
- **مجوز Administrator:** اسکریپت باید با دسترسی ادمین اجرا شود.
- **اتصال شبکه:** برای تست و اعمال DNS لازم است.

---

## 🚀 نصب و راه‌اندازی

1. **دانلود پروژه:**

   ```bash
   git clone https://github.com/<Argh94>/DNSWizard.git
   ```

   یا فایل ZIP را دانلود و استخراج کنید.

2. **اجرای اسکریپت:**
   - فایل `DNSWizard.bat` را پیدا کنید.
   - راست‌کلیک کرده و **Run as administrator** را انتخاب کنید.

> ⚠️ **نکته:**  
> فایل در مسیری اجرا شود که دسترسی نوشتن داشته باشید (فایل‌های بکاپ و لاگ در همان مسیر ذخیره می‌شوند).

---

## 📝 نحوه استفاده

1. **اجرای اسکریپت با دسترسی ادمین.**
2. **انتخاب از منو:**  
   منوی اصلی ۲۹ گزینه دارد (ارائه‌دهندگان DNS، DHCP، بازیابی، مدیریت بکاپ‌ها و خروج).

3. **شماره گزینه مورد نظر (۱ تا ۲۹) را وارد کنید و Enter بزنید.**

### گزینه‌های منو:
- **۱-۲۵:** انتخاب ارائه‌دهنده DNS (مثل Cloudflare، Google، Shecan و ...)
- **۲۶:** تنظیم DNS به حالت DHCP (اتوماتیک)
- **۲۷:** بازیابی تنظیمات DNS از آخرین بکاپ
- **۲۸:** مدیریت فایل‌های پشتیبان (نمایش یا حذف)
- **۲۹:** خروج

### مدیریت فایل‌های پشتیبان (گزینه ۲۸):
- **۱:** نمایش لیست بکاپ‌ها
- **۲:** حذف همه بکاپ‌ها (پیشنهاد: تأیید قبل از حذف اضافه شود)
- **۳:** بازگشت به منوی اصلی

---

## 🖥️ نمونه خروجی

```
|==================================================|
|         DNS Changer - Advanced Restore Version   |
|==================================================|
1. Begzar (IPv4: 185.55.226.26/185.55.225.25, IPv6: 2a0c:5a80::feed:1/2a0c:5a80::feed:2, DoH: No)
2. Shecan (IPv4: 178.22.122.100/185.51.200.2, IPv6: 2a06:fb00:1::1/2a06:fb00:1::2, DoH: No)
...
9. Cloudflare (IPv4: 1.1.1.1/1.0.0.1, IPv6: 2606:4700:4700::1111/2606:4700:4700::1001, DoH: Yes)
...
28. Manage Backups
29. Exit

Enter the number of your choice (1-29): 9

Applying DNS settings...
DNS servers set to Cloudflare!
Note: Cloudflare supports DNS over HTTPS (DoH). Configure it manually via browser or OS settings for enhanced security.
DNS cache flushed successfully.

Press any key to return to the menu...
```

---

## 🛠️ دستورات و عملکردها

- `netsh` : نمایش و تنظیم سرورهای DNS (IPv4/IPv6)
- `ipconfig /flushdns` : پاک کردن کش DNS پس از تغییر
- `nslookup` : تست رزولوشن دامنه توسط سرورهای DNS
- `ping` : بررسی دسترسی‌پذیری سرور DNS
- **فایل‌های پشتیبان:**  
  با فرمت `<interface>_dns_backup_<datetime>.txt` ذخیره می‌شوند.
- **فایل لاگ:**  
  همه تغییرات در `DNSChanger_log.txt` ثبت می‌شود.

---

## ⚠️ محدودیت‌ها

- ❌ **پشتیبانی مستقیم از DoH:**  
  به دلیل محدودیت Batch، فعال‌سازی DoH باید به صورت دستی انجام شود.
- 🪟 **فقط ویندوز:**  
  اسکریپت فقط روی Windows کار می‌کند.
- 🌐 **عدم پشتیبانی چندزبانه:**  
  فعلاً پیام‌ها فقط به انگلیسی‌اند (افزودن زبان فارسی در آینده).

---

## 💡 پیشنهادات برای بهبود

- اعتبارسنجی قوی‌تر ورودی‌ها
- تأیید قبل از حذف فایل‌های پشتیبان
- پشتیبانی از زبان فارسی 🇮🇷
- بازنویسی با PowerShell برای امکانات بیشتر و پشتیبانی مستقیم از DoH

---

## 🤝 مشارکت

ما از مشارکت شما استقبال می‌کنیم!  
برای گزارش باگ، پیشنهاد ویژگی یا ارسال Pull Request:

- **گزارش باگ:** یک Issue جدید در GitHub ایجاد کنید.
- **پیشنهاد ویژگی:** ایده‌های خود را در بخش Issues به اشتراک بگذارید.
- **Pull Request:** کد خود را برای بهبود پروژه ارسال کنید.

---

## 📄 لایسنس

این پروژه تحت [MIT License](LICENSE) منتشر شده است.

---

## 📬 تماس

- **GitHub:** [Argh94](https://github.com/Argh94)
